<!--
  - action_about.html
  - Product information and language select
  -->
<div id='action_about' data-role="page">
   <style scoped>
      #action_about img:hover { width: 700px; }
      #action_about div { max-width: 1000px; margin: 0 auto; }
      #action_about div h1, #action_about article h2 { clear: both; }
      #action_about img { border: 2px ridge lightgrey; width: 350px; transition: width 1.5s, height 1.5s; }
      #action_about figure.right { margin-left: 1em; }
      #action_about figure.left  { margin-right: 1em; }
   </style>

   <header>
      <a class='i18n' onclick='od.gui.goto("list")'> action.list.link_text </a>
      <h1 class="i18n"> action.about.title </h1>
      <a class='i18n' href='https://github.com/Sheep-y/trpg-dnd-4e-db'> action.about.link_homepage </a>
   </header>

   <div>
      <article class='left'>
         <h1 class='i18n'> action.about.h_language </h1>
         <p>
            Please select language <span class='i18n'> action.about.lbl_select_lang </span>
            <select id='action_about_lst_lang' onchange='od.action.about.change_language(this.value)'>
               <option value='' class='i18n'> action.about.opt_auto
               <option value='zh'> Chinese 中文
               <option value='en'> English
            </select> <br/>
            <label>
               <span class='i18n'> action.about.lst_symbol </span>
               <select id='action_about_lst_symbol' onchange="od.action.about.change_symbol(this.value)">
                  <option value='' class='i18n'> action.about.opt_original
                  <option value='Common'  class='i18n'> action.about.opt_common
                  <option value='Dingbat' class='i18n'> action.about.opt_dingbat
                  <option value='Plain'   class='i18n'> action.about.opt_plain
               </select>
            </label> <br/>
            <span id="action_about_lbl_unicode" class="hide">
               ✦
               <span class='hint_basic'> ͜͡⋖ ͜͡⚔ ͜͡➶ ͜͡✻ </span>
               <span class='hint_attack'> ⋖ ⚔ ➶ ✻ </span>
               <span class='hint_dice'> ⚀ ⚁ ⚂ ⚃ ⚄ ⚅ </span>
               <span class='hint_aura'> ☼ </span>
            </span>
            <span id="action_about_lbl_symbol"></span>
         </p>
      </article>

      <article class='right'>
         <h1 class='i18n'> action.about.h_license </h1>
         <p class='i18n'> action.about.p_license </p>
         <p>
            <a class='i18n button' onclick='od.gui.goto("license")'> action.license.link_text </a>
            <a class='i18n button' onclick='od.action.about.show_source()'> action.about.a_source </a>
            <a class='i18n button' href='mailto:your.sheepy@gmail.com' > action.about.a_email </a>
         </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_get_data </h1>
         <p class='i18n'> action.about.p_get_data </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_search_data </h1>
         <p class='i18n'> action.about.p_search_data </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_move_data </h1>
         <p class='i18n'> action.about.p_move_data </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_history </h1>
         <p>
            <span class="i18n"> action.about.lbl_history </span> <br/>
            <span class="i18n"> action.about.lbl_english_only </span>
         </p>
         <section>
            <h2> Original Prototype </h2>
               <figure class='right'>
                  <img alt='' id="action_about_history_0" src=''/>
                  <figcaption>Screenshot version: <time>2010-11-17</time></figcaption>
               </figure>
            <p>
               It all started with online Character Builder. <br/>
               I was, and still is, spending 3 hours on buses each day.  Sometimes I spent them on the original, offline Character Builder. <br/>
               Until it went online.  Wanting better offline access, the prototype as seen on right was born. <br/>
               It was a bookmarket that just grabbed entries from online compendium into a popup, applied <a href='http://www.datatables.net/'>DataTables</a> on top of it, and then you can manually save the popup for offline use.
            </p>
         </section>
         <section>
            <h2> 1<sup>st</sup> Version </h2>
               <figure class='left'>
                  <img alt='' id="action_about_history_1" src=''/>
                  <figcaption>Screenshot version: <time>2012-03-23</time>;<br/>Main development ceased in 2011 March. </figcaption>
               </figure>
            <p>
               So I kept working on it. <br/>
               Inspired by DataTables' search code, I coded a search term parser that works with Google like syntax. <br/>
               With the ability to search for feat with <q>"bonus to damage" OR "extra damage" -"feat bonus"</q>, it is now possible to build characters using a goal-oriented approach, instead of choosing from valid options. <br/>
               New features are also being added.  Preview panel, multi columns, or pick out items and generate a simple sheet such as character power list. <br/>
               Look matters, too, so the script will grab a <a href='http://www.wizards.com/default.asp?x=dnd/dnd/20030711x'>nice wallpaper</a> through <a href='http://en.wikipedia.org/wiki/Coral_Content_Distribution_Network'>Coral</a>, output fancy CSS styles, data uri icons etc. <br/>
               It helped me a lot in the two years that follows, both as a DM and as a player.
            </p>
         </section>
         <section>
            <h2> 2<sup>nd</sup> Version </h2>
               <figure class='right'>
                  <img alt='' id="action_about_history_2" src=''/>
                  <figcaption>Screenshot version: <time>2012-02-17</time></figcaption>
               </figure>
            <p>
               The problem with first version is that it is big and slow even on PC, much less mobile. <br/>
               "Powers" is a 15MB html file, and the browser has to layout 8800 full item content when it is opened.
               Thus come the second version, powered by the then prototype <a href="http://jquerymobile.com/‎">jQuery Mobile</a>.
               It looks good.  Impressive animation, elegance style, familiar icons.  An index was created from <a href='http://ails.deviantart.com/art/420-Pixel-Art-Icons-for-RPG-129892453'>Ails' RPG icons</a>, data are processed in multiple threads, and appcache used to preload data. <br/>
               Then disaster struck.  Most mobile browser refuse to load local HTML, and cookie and web workers are not supported offline.  Google really wants to keep you online. <br/>
               There are workarounds, but the biggest problem is, jQuery Mobile takes very long time to display entry titles (rightmost screen).  Two to three times longer then displaying their _contents_ in previous version. <br/>
               This is when I give up.  Well, at least the index were reused for first version.
            </p>
         </section>
         <section>
            <h2> 3<sup>rd</sup> Version Prototype </h2>
               <figure class='left'>
                  <img alt='' id="action_about_history_3" src=''/>
                  <figcaption>Screenshot version: <time>2012-05-16</time></figcaption>
               </figure>
            <p>
               Third version development started in 2012 Sep, and is a bold experiment in what can JavaScript do.
               Instead of letting others do most of the work, the new version do download, index, everything by itself. <br/>
               Sadly, when a prototype is working, Firefox <a href="https://blog.mozilla.org/mrbkap/2012/09/12/">pulled the plug on enablePrivilage</a> and killed it with no hope of resurrection. <br/>
               After playtesting D&amp;D Next for a while, work restarted in May when the <a href="http://www.amazon.com/Aspire-V5-171-6422/dp/B009A8KZKS/">notebook</a> has been repaired. <br/>
               With a simplified database structure, the second prototype works like a charm.  From here begins the long journey of turning it into a polished product.
            </p>
         </section>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_version_history </h1>
         <p class="i18n"> action.about.lbl_english_only </p>
         <dl>
            <dt> 3.0 M2 <time pubdate>2013-06-25</time> </dt>
            <dd> Added local data reindex/delete, navbar, responsive layout, simplify data storage, proper download state tracking, sort &amp; style category, background image, style all entries. </dd>

            <dt> 3.0 M1 <time pubdate>2013-05-29</time> </dt>
            <dd> Added style for power, content image conversion, help doc, AGPL license, view source, email, regx terms. </dd>

            <dt> 3.0 M0 <time>2013-05-25</time> </dt>
            <dd> Published through Github. Added about page, nav header style. </dd>

            <dt> 3.0 Proto 2 <time>2013-05-25</time> </dt>
            <dd> Prototype complete after testing on full set of compendium data. </dd>

            <dt> 3.0 Design <time>2012-09-09</time> </dt>
            <dd> Skeleton code outlining program structure. </dd>
         </dl>
      </article>
   </div>
</div>

<div id='action_license' data-role="page">
   <header>
      <a class='i18n' onclick='od.gui.goto("about")'> action.about.link_text </a>
      <h1 class="i18n"> action.license.title </h1>
      <a class='i18n' onclick='od.action.about.show_source()'> action.about.a_source </a>
   </header>
   <article id="txt_license">
      <!--#include file='license_agpl.html' -->
   </article>
</div>

<script type='text/javascript'>'use strict';(function action_about_init(){

od.action.about = {

   "initialize" : function action_about_init () {
      _('#action_about_history_0')[0].src = _('#img_about_history_0')[0].src;
      _('#action_about_history_1')[0].src = _('#img_about_history_1')[0].src;
      _('#action_about_history_2')[0].src = _('#img_about_history_2')[0].src;
      _('#action_about_history_3')[0].src = _('#img_about_history_3')[0].src;
      _('#action_about_lbl_folder')[0].textContent = od.config.data_read_path; // TODO: Properly hook into i18n.
   },

   "setup": function action_about_setup () {
      od.action.about.change_language( _('#action_about_lst_lang')[0].value );
      od.action.about.change_symbol( _('#action_about_lst_symbol')[0].value );
   },

   "cleanup": null,

   "change_language" : function action_about_change_language ( lang ) {
      _.l.saveLocale( lang );
      _.l.localise();
   },

   "change_symbol" : function action_about_change_symbol ( symbol ) {
      od.config.symbol_conversion = symbol ? symbol : false;
      _('#action_about_lbl_symbol')[0].innerHTML = od.gui.symbol_safe_convert( _('#action_about_lbl_unicode')[0].innerHTML );
   },

   "show_source" : function action_about_show_source () {
      // Chrome and Mozilla series (Firefox, SeaMonkey, Web) support view-source.
      if ( ! /\b(Gecko\/|Chrome\/)/.test( navigator.userAgent ) ) return alert( _.l( 'action.about.lbl_source_manual' ) );
      location.href = "view-source:" + location.href;
   }
};

od.action.license = {
};

})();</script>