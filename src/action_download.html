<!--
  - action_download.html
  - Query online compendium and shows what can be downloaded / updated.
  -->
<div id='action_download'>
   <h1 class="i18n">action.download.title</h1>
   <p class="i18n"> action.download.paragraph.0 </p>
   <p class="i18n"> action.download.paragraph.1 </p>
   <p>
      <!--input type='search' class='right' placeholder='Search' autofocus-->
      <a class='button i18n' onclick='oddi.action.download.event.refresh()'> action.download.btn_refresh </a>
      <label> <input type='checkbox'> <span class='i18n'>action.download.chk_refresh</span> </label>
   </p>
   <p class='i18n'> action.download.paragraph.2 </p>
   <p>
      <a class='button' id="act_download_btn_updateChanged" onclick='oddi.action.download.event.updateChanged()'></a><br>
      <a class='button' id="act_download_btn_updateAll" onclick='oddi.action.download.event.updateAll()'></a>
   </p>
</div>
<script type='text/javascript'>'use strict';(function action_download_init(){

oddi.action.download = {
   id: 'action_download',
   setup: function() {
         oddi.gui.set( 'act_download_btn_updateChanged', '' );
         oddi.gui.set( 'act_download_btn_updateAll', '' );
      },
   cleanup: null,
   event: {
      refresh: function download_refresh() {
         oddi.data.clear();
         oddi.reader.read_index();
         oddi.downloader.get_index();
      },
      show_update_buttons: function download_show_update_buttons( newCount, changedCount, allCount ) {
         oddi.gui.set( 'act_download_btn_updateChanged', ( newCount || changedCount ) ? _.l( 'action.download.btn_updateChanged' ) : '', newCount, changedCount  );
         oddi.gui.set( 'act_download_btn_updateAll', allCount ? _.l( 'action.download.btn_updateAll' ) : '', allCount );
      }
   },
};

})()</script>