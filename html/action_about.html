<!--
  - action_about.html
  - Product information and language select
  -->
<section id='action_about'>
   <style scoped>
      #action_about div { max-width: 1000px; margin: 0 auto; }
      #action_about div h1, #action_about article h2 { clear: both; }
      #action_about img { border: 2px ridge lightgrey; width: 400px; }
      #action_about figure.right { margin-left: 1em; }
      #action_about figure.left  { margin-right: 1em; }
      #action_about .nodata { font-weight: bold; font-size: 150%; }
   </style>

   <div>
      <p class='nodata i18n' style='display: none'> action.about.p_nodata </p>

      <article class='left'>
         <h1 class='i18n'> action.about.h_language </h1>
         <p>
            Language<span class='i18n'> action.about.lbl_select_lang </span>
            <select id='action_about_lst_lang' onchange='od.action.about.change_language(this.value)'>
               <option value='' class='i18n'> action.about.opt_auto
               <option value='zh'> Chinese 中文
               <option value='en'> English
            </select> <br/>
            <span class='i18n'> action.about.lbl_toggle_highlight </span>
            <label>
               <input type='radio' name='highlight' id='action_about_rdo_highlight_on' checked onclick='od.gui.toggle_highlight(true)' />
               <span class='i18n'> action.about.opt_highlight_on </span>
            </label>
            <label>
               <input type='radio' name='highlight' id='action_about_rdo_highlight_off' onclick='od.gui.toggle_highlight(false)' />
               <span class='i18n'> action.about.opt_highlight_off </span>
            </label>
         </p>
      </article>

      <article class='right'>
         <h1 class='i18n'> action.about.h_license </h1>
         <p class='i18n'> action.about.p_license </p>
         <p>
            <button class='i18n' onclick='od.gui.go("license")'> action.license.link_text </button>
            <a class='button i18n' href='https://github.com/Sheep-y/trpg-dnd-4e-db'> action.about.a_github </a>
            <a class='button i18n' href='mailto:your.sheepy@gmail.com' accesskey="9" > action.about.a_email </a>
         </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_intro </h1>
         <p class='i18n'> action.about.p_intro </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_search_data </h1>
         <p class='i18n'> action.about.p_search_data </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_move_data </h1>
         <p class='i18n'> action.about.p_move_data </p>
      </article>

      <article>
         <h1 class='i18n'> action.about.h_history </h1>
         <p>
            <span class="i18n"> action.about.lbl_english_only </span>
         </p>
         <section lang="en">
            <h2> Original Prototype </h2>
               <figure class='right'>
                  <a href="https://github.com/Sheep-y/trpg-dnd-4e-db/blob/master/res/img/History - 1st alpha.jpg"><img alt='' id="action_about_history_0" src=''/></a>
                  <figcaption>Date: <time>2010-11-17</time></figcaption>
               </figure>
            <p>
               It all started with <a href="https://www.youtube.com/watch?v=z-1_3VCEyG0">online Character Builder</a>.
               For many years, I was spending 3 hours on public transport each day.
               Sometimes I spent them on the original, <a href="https://www.youtube.com/watch?v=2hjzWeDPHfk">offline Character Builder</a>.
            </p><p>
               Until it went online.
               Wanting better offline access, the prototype as seen on right was born.
               It was a <a href="https://en.wikipedia.org/wiki/Bookmarklet">bookmarket</a> that just grabbed entries from online compendium into a popup, applied <a href='http://www.datatables.net/'>DataTables</a> on top of it, and then you can manually save the popup for offline use.
            </p>
         </section>
         <section lang="en">
            <h2> 1<sup>st</sup> Version </h2>
               <figure class='left'>
                  <a href="https://github.com/Sheep-y/trpg-dnd-4e-db/blob/master/res/img/History - 1st gen.jpg"><img alt='' id="action_about_history_1" src=''/></a>
                  <figcaption>Date: <time>2012-03-23</time>; Development stopped 2011 March. </figcaption>
               </figure>
            <p>
               It is nice to have an offline catalog.  So I keep working on it.
               Inspired by DataTables' search code, I coded a search term parser that works with Google like syntax.
            </p><p>
               With the ability to search for feat with <q>"bonus to damage" OR "extra damage" -"feat bonus"</q>, it is now possible to build characters using a goal-oriented approach, instead of choosing from valid options.
            </p><p>
               New features are also being added.  Preview panel, multi columns, or pick out items and generate a simple sheet such as character power list.
               The script also grabs a <a title='Official D&D wallpaper' href='http://www.wizards.com/default.asp?x=dnd/dnd/20030711x'>nice wallpaper</a> through <a href='http://en.wikipedia.org/wiki/Coral_Content_Distribution_Network'>Coral</a>, output fancy CSS styles, data uri icons etc.
            </p><p>
               It helped me a lot in the two years that follows, both as a DM and as a player.
            </p>
         </section>
         <section lang="en">
            <h2> 2<sup>nd</sup> Version </h2>
               <figure class='right'>
                  <a href="https://github.com/Sheep-y/trpg-dnd-4e-db/blob/master/res/img/History - 2nd alpha.jpg"><img alt='' id="action_about_history_2" src=''/></a>
                  <figcaption>Three screens from left to right. Date: <time>2012-02-17</time></figcaption>
               </figure>
            <p>
               The problem with first version is that it is big and slow even on PC, much less mobile.
               "Powers" is a 15MB html file, and the browser has to layout 8800 all items when it is opened.
            </p><p>
               Thus come the second version, powered by the then prototype <a href="http://jquerymobile.com/‎">jQuery Mobile</a>.
               It looks good.  Impressive animation, elegance style, familiar icons.  An index was created from <a href='http://ails.deviantart.com/art/420-Pixel-Art-Icons-for-RPG-129892453'>Ails' RPG icons</a>, data are processed in multiple threads, and appcache used to preload data.
            </p><p>
               Then disaster struck.  Most mobile browser refuse to load local HTML, and Google Chrome disabling a lot of features for local file.
               Biggest problem is, jQuery Mobile takes very long time to display entry titles (rightmost screen).  Two to three times longer then displaying their _contents_ in previous version.
               This is when I give up.
            </p><p>
               At least the nice icons were reused in later versions.
            </p>
         </section>
         <section lang="en">
            <h2> 3<sup>rd</sup> Version </h2>
               <figure class='left'>
                  <a href="https://github.com/Sheep-y/trpg-dnd-4e-db/blob/master/res/img/History - 3rd alpha.jpg"><img alt='' id="action_about_history_3" src=''/></a>
                  <figcaption>Date: <time>2012-05-16</time>, prototype. Later releases look like v3.5.</figcaption>
               </figure>
            <p>
               Third version development started in 2012 Sep, and is a bold experiment in what can JavaScript do.
               Instead of letting the official compendium do most of the work, the new version do download, convert, index, everything by itself.
            </p><p>
               Sadly, soon after the first prototype, Firefox <a title="Security Checks and enablePrivilege in Gecko, part 1" href="https://blog.mozilla.org/mrbkap/2012/09/12/">killed file writing</a> permanently. <br/>
               That leaves IE as the only supported browser, until IE 11 arrives which <a href="https://msdn.microsoft.com/library/dn423948(v=vs.85).aspx">hides</a> (and breaks) file writing too. <br/>
            </p><p>
               After playtesting <a href="https://www.wired.com/2012/05/d-d-update-mike-mearls/">D&amp;D Next</a> (5th edition) for a few months, work restarted in May 2013.
               With the data split into many small files to speed up access, the second prototype works like a charm.
               But then my time diverted to 5e and other games, and major development stopped around May 2014.
            </p>
         </section>
         <section lang="en">
            <h2> 3.5<sup>th</sup> Version </h2>
               <figure class='right'>
                  <a href="https://github.com/Sheep-y/trpg-dnd-4e-db/blob/master/res/img/History - v3.5 viewer.png"><img alt='' id="action_about_history_3_5" src=''/></a>
                  <figcaption>Date: <time>2016-07-20</time></figcaption>
               </figure>
            <p>
               By 2016, I gave up 5e and switched back.  The world changed a lot.
               Mobile has overtaken desktop, Internet Explorer <a href='https://blogs.msdn.microsoft.com/ie/2015/02/26/a-break-from-the-past-the-birth-of-microsofts-new-web-rendering-engine/'>is dead</a>,
               DDI <a href='http://www.enworld.org/forum/content.php?3087-4e-DnD-Insider-Moving'>has frozen</a> and switched login system,
               <a href='https://en.wikipedia.org/wiki/JavaFX'>JavaFX 8</a> brings a <a href='https://docs.oracle.com/javase/8/javafx/api/javafx/scene/web/WebEngine.html'>scriptable browser</a> to standard Java.
               Our firstborn is due in October, too, so I better fix the <a href='https://github.com/Sheep-y/trpg-dnd-4e-db/issues/9'>download</a> <a href='https://github.com/Sheep-y/trpg-dnd-4e-db/issues/12'>problems</a> <i>asap</i>.
            </p><p>
               In <a href='https://github.com/Sheep-y/trpg-dnd-4e-db/commit/0fede587e31f7ec90f00e779f906822ddb3413a6#diff-49da3f7f21ed8673cfa993016bea63a7'>July 2016</a>,
               a downloader is coded in Java.
               Code is simple.  No need to check new data, no need to fool security, and clean separation of input and output.
               I can fix errors, add new columns, or exclude flavour text from full text search.  Things that were too complicated in v3.
            </p><p>
               The plan was to bug fix the old viewer and write a new one.
               But it works so well, I keep improving it after my baby is born.
               As of writing it has decent mobile support, many new columns, small data structure, data dump, and fixed many errors both data and code.
               This should be the final major release of the 3.5 branch.
            </p>
         </section>
      </article>

      <article lang="en">
         <h1 class='i18n'> action.about.h_version_history </h1>
         <p class="i18n"> action.about.lbl_english_only </p>
         <dl>
            <dt> 3.5.4 <time>2017-??-??</time> </dt>
            <dd> Regroup Artifact, Lair, and Alchemical items.  Assorced fixes and enhancements. </dd>

            <dt> 3.5.3 <time>2017-02-02</time> </dt>
            <dd> Autocomplete in column filters, list power types and race origins, item can be filtered by high level versions, item set text index exclude items, column filter highlight, update checker in viewer.
               Add csv, tsv, json, sql, and xlsx dump of raw data.  Total fixed 1300+ entries.  New columns, assorted fixes and improvements. <a href='https://youtu.be/aNDze9Ok5fE'>First Youtube video</a>. </dd>

            <dt> 3.5.2.1 <time>2016-12-19</time> </dt>
            <dd> Add raw data export in html and high contrast theme (Windows). Fix new Java compatibility and other bugs. </dd>

            <dt> 3.5.2 <time>2016-11-19</time> </dt>
            <dd> Multi-thread export, reduce file count from 25k to 1.8k, split items into four categories, new data columns, internal lookup, and accessibility improvements. Total fixed 530+ entries. </dd>

            <dt> 3.5.1 <time>2016-07-31</time> </dt>
            <dd> Implement paging, fix all category list and some search bugs, update entry style and mobile layout, and 370+ entry corrections. </dd>

            <dt> 3.5.0 <time>2016-07-20</time> </dt>
            <dd> Faster result display; improves layout, highlight, and search. Fix IE 11 and Chrome 51 compatibility. </dd>

            <dt> 3.0 M3 <time>2014-05-12</time> </dt>
            <dd> Improved search flow, guide, and navigation; implemented filter, sort, next, prev. </dd>

            <dt> 3.0 M2 <time>2013-06-25</time> </dt>
            <dd> Added local data reindex/delete, navbar, responsive layout, simplify data storage, proper download state tracking, sort &amp; style category, background image, style all entries. </dd>

            <dt> 3.0 M1 <time>2013-05-29</time> </dt>
            <dd> Added style for power, content image conversion, help doc, AGPL license, view source, email, regx terms. </dd>

            <dt> 3.0 M0 <time>2013-05-25</time> </dt>
            <dd> Published through Github. Added about page, nav header style. </dd>

            <dt> 3.0 Proto 2 <time>2013-05-25</time> </dt>
            <dd> Prototype complete after testing on full set of compendium data. </dd>

            <dt> 3.0 Design <time>2012-09-09</time> </dt>
            <dd> Skeleton code outlining program structure. </dd>
         </dl>
      </article>
   </div>

   <header role="banner">
      <button class='i18n' onclick='od.gui.go("list")' accesskey='1'> action.list.link_text </button>
      <h1 class="i18n"> action.about.title </h1>
      <button class='i18n top' onclick='scrollTo(0,0)'> gui.top </button>
   </header>

</section>

<section id='action_license'>
   <article lang="en">
      <?coco file( "../license_agpl.html" ) coco ?>
   </article>
   <header role="navigation">
      <button class='i18n' onclick='od.gui.go("about")' accesskey='1'> action.about.link_text </button>
      <h1 class="i18n"> action.license.title </h1>
      <button class='i18n' onclick='scrollTo(0,0)'> gui.top </button>
   </header>
</section>

<script><?coco-start js(minify) ?>   'use strict';(function action_about_init(){

od.action.about = {

   "initialize" : function act_about_init () {
      _('#action_about_history_0')[0].src = _('#img_about_history_0')[0].src;
      _('#action_about_history_1')[0].src = _('#img_about_history_1')[0].src;
      _('#action_about_history_2')[0].src = _('#img_about_history_2')[0].src;
      _('#action_about_history_3')[0].src = _('#img_about_history_3')[0].src;
      _('#action_about_history_3_5')[0].src = _('#img_about_history_3_5')[0].src;
   },

   "setup": function act_about_setup () {
      od.action.about.change_language( _('#action_about_lst_lang')[0].value );
      od.gui.toggle_highlight( od.gui.hl_enabled );
      _('#action_about_lbl_folder')[0].textContent = od.config.data_read_path; // Must be after default l10n created the placeholder
   },

   "change_language" : function act_about_change_language ( lang ) {
      _.l.saveLocale( lang );
      _.l.detectLocale( 'en' );
      od.gui.l10n();
   },
};

od.action.license = {
};

})();<?coco-end?></script>